{"version":3,"sources":["shared/Common/Name.js","app/components/Header/Header.js","app/components/Container/Container.js","app/components/Section/Section.js","app/components/Loading/Loading.js","app/Axios/AxiosInstance.js","shared/GeoCode/GeoCode.js","shared/Passenger/Passenger.js","shared/Common/Const.js","app/utils/ParsePollRes.js","app/components/Content/Content.js","shared/Lang/Lang.js","shared/Currency/Currency.js","app/components/Navbar/Navbar.js","App.js","shared/Lang/i18n.js","index.js","app/components/Content/Content.module.sass","app/components/Section/Section.module.sass","app/components/Container/Container.module.sass","app/components/Navbar/Navbar.module.sass","app/components/Header/Header.module.sass","app/components/Loading/Loading.module.sass"],"names":["NameJson","Header","t","useTranslation","className","classes","title","Container","navbar","content","Navbar","Content","Section","res","Info","href","operatorUrl","src","operatorLogoUrl","Log","alt","leavingFrom","description","departure","departureAddress","departureTime","goingTo","arrival","arrivalAddress","arrivalTime","price","currency","Loading","loading","size","AxiosInstance","axios","create","baseURL","headers","Accept","GeoCodeList","value","label","PassengerList","ConstJson","ParsePollRes","departures","locations","operators","map","dep","find","loc","id","origin_location_id","destination_location_id","operator","op","operator_id","name","address","join","departure_time","substring","arrival_time","prices","total","toFixed","url","logo_url","e","lang","useState","changeLeavingFrom","changeGoingTo","currentDate","Date","toISOString","leavingDay","changeLeavingDay","adult","child","senior","onLoading","setOnLoading","setDepartures","setLocations","setOperators","pollSearch","index","get","params","then","prevDep","Object","assign","data","prevLoc","prevOp","complete","setTimeout","length","catch","err","console","log","showResult","sections","noResult","parseRes","key","uuidv4","ShowResult","Form","FormGroup","FormItem","options","onChange","ob","placeholder","SelectDeparture","DatePicker","defaultValue","moment","returnDay","passenger","disabled","selectPassenger","SearchBtn","onClick","type","icon","SearchOutlined","Search","LangList","CurrencyList","nabvarChanged","NavbarItem","cur","language","App","i18n","setLang","setCurrency","useEffect","i18next","changeLanguage","resources","en","translation","fr","use","initReactI18next","init","lng","fallbackLng","debug","keySeparator","interpolation","escapeValue","formatSeparator","react","wait","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"ukCAmBeA,EAnBE,CACb,QAAW,aACX,MAAS,iCAGZ,YAAe,eACf,QAAW,WACX,WAAc,cACd,UAAa,aACb,UAAa,YACV,OAAU,SACV,gBAAmB,qBACnB,gBAAmB,qBAGnB,SAAY,YACZ,MAAS,SCKEC,EAZA,WAAO,IACbC,EAAMC,cAAND,EAER,OACC,4BAAQE,UAAWC,IAAQJ,QAC1B,yBAAKG,UAAWC,IAAQC,OACrBJ,EAAEF,EAASM,UCSFC,EAdG,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QACzB,OACI,yBAAKL,UAAWC,IAAQE,WACpB,kBAAC,EAAD,MACA,yBAAKH,UAAWC,IAAQK,QACnBF,GAEL,yBAAKJ,UAAWC,IAAQM,SACnBF,K,gHCcFG,EAvBC,SAAC,GAAa,IAAXC,EAAU,EAAVA,IACVX,EAAMC,cAAND,EAEL,OACI,yBAAKE,UAAWC,IAAQO,SACpB,yBAAKR,UAAWC,IAAQS,MACpB,uBAAGC,KAAMF,EAAIG,aACT,yBAAKC,IAAKJ,EAAIK,gBAAiBd,UAAWC,IAAQc,IAAKC,IAAI,mBAE/D,yBAAKhB,UAAWC,IAAQC,OAASJ,EAAEF,EAASqB,aAA5C,KACA,yBAAKjB,UAAWC,IAAQiB,aAAcT,EAAIU,WAC1C,yBAAKnB,UAAWC,IAAQiB,aAAcT,EAAIW,kBAC1C,yBAAKpB,UAAWC,IAAQiB,aAAcT,EAAIY,eAC1C,yBAAKrB,UAAWC,IAAQC,OAASJ,EAAEF,EAAS0B,SAA5C,KACA,yBAAKtB,UAAWC,IAAQiB,aAAcT,EAAIc,SAC1C,yBAAKvB,UAAWC,IAAQiB,aAAcT,EAAIe,gBAC1C,yBAAKxB,UAAWC,IAAQiB,aAAcT,EAAIgB,aAC1C,yBAAKzB,UAAWC,IAAQC,OAASJ,EAAEF,EAAS8B,OAA5C,KAAuDjB,EAAIiB,MAA3D,IAAmEjB,EAAIkB,a,0BCLxEC,EAXC,WAAO,IACd9B,EAAOC,cAAPD,EAER,OACC,yBAAKE,UAAWC,IAAQ2B,SACvB,6BAAO9B,EAAEF,EAASiC,UAClB,kBAAC,IAAD,CAAMC,KAAK,Y,QCFCC,E,OATOC,EAAMC,OAAO,CAClCC,QAAS,2BACTC,QAAS,CACR,eAAgB,mBAChBC,OAAQ,gFACR,iBAAkB,oCCJLC,EANK,CACnB,CAAEC,MAAO,SAAUC,MAAO,YAC1B,CAAED,MAAO,SAAUC,MAAO,YAC1B,CAAED,MAAO,SAAUC,MAAO,eCGZC,EANO,CACrB,CAAEF,MAAO,QAASC,MAAO,SACzB,CAAED,MAAO,QAASC,MAAO,SACzB,CAAED,MAAO,SAAUC,MAAO,WCCZE,EAJG,CACjB,WAAc,KCiCAC,EA5BM,SAACC,EAAYC,EAAWC,GACzC,IAEI,OAAOF,EAAWG,KAAI,SAAAC,GAAQ,IAAD,IACnB5B,EAAYyB,EAAUI,MAAK,SAAAC,GAAG,OAAIA,EAAIC,KAAOH,EAAII,sBACjD5B,EAAUqB,EAAUI,MAAK,SAAAC,GAAG,OAAIA,EAAIC,KAAOH,EAAIK,2BAC/CC,EAAWR,EAAUG,MAAK,SAAAM,GAAE,OAAIA,EAAGJ,KAAOH,EAAIQ,eAEpD,MAAO,CACH,UAAapC,EAAUqC,KACvB,iBAAoBrC,EAAUsC,QAAQC,KAAK,KAC3C,cAAiBX,EAAIY,eAAeC,UAAU,GAAI,IAClD,QAAWrC,EAAQiC,KACnB,eAAkBjC,EAAQkC,QAAQC,KAAK,KACvC,YAAeX,EAAIc,aAAaD,UAAU,GAAI,IAC9C,QAAU,UAAAb,EAAIe,cAAJ,eAAYC,OAAQ,KAAKC,QAAQ,GAC3C,mBAAYjB,EAAIe,cAAhB,aAAY,EAAYnC,SACxB,YAAe0B,EAASY,IACxB,gBAAmBZ,EAASa,aAIxC,MAAMC,GACF,OAAO,OC8IA5D,EApJC,SAAC,GAAwB,IAAtB6D,EAAqB,EAArBA,KAAMzC,EAAe,EAAfA,SAChB7B,EAAMC,cAAND,EAD+B,EAGEuE,mBAAShC,EAAY,GAAGC,OAH1B,mBAGhCrB,EAHgC,KAGnBqD,EAHmB,OAIND,mBAAShC,EAAY,GAAGC,OAJlB,mBAIhChB,EAJgC,KAIvBiD,EAJuB,KAMjCC,GADM,IAAIC,MACQC,cAAcd,UAAU,EAAG,IANZ,EAOAS,mBAASG,GAPT,mBAOhCG,EAPgC,KAOpBC,EAPoB,OAQVP,mBAAS,GARC,mBAQhCQ,EARgC,aASVR,mBAAS,IATC,mBAShCS,EATgC,aAURT,mBAAS,IAVD,mBAUhCU,EAVgC,aAWLV,oBAAS,IAXJ,mBAWhCW,EAXgC,KAWrBC,EAXqB,OAYHZ,mBAAS,IAZN,mBAYhC1B,EAZgC,KAYpBuC,EAZoB,OAaLb,mBAAS,IAbJ,oBAahCzB,GAbgC,MAarBuC,GAbqB,SAcLd,mBAAS,IAdJ,qBAchCxB,GAdgC,MAcrBuC,GAdqB,MAqCjCC,GAAa,SAAbA,EAAcC,GACnBvD,EAAcwD,IAAd,wBAAmCtE,EAAnC,YAAkDK,EAAlD,YAA6DqD,EAA7D,SAAgF,CAC/Ea,OAAQ,CACPX,QACAC,QACAC,SACAX,OACAzC,WACA2D,WAGDG,MAAK,SAAAhF,GAGLyE,GAAc,SAAAQ,GACb,OAAOC,OAAOC,OAAOF,EAASjF,EAAIoF,KAAKlD,eAExCwC,IAAa,SAAAW,GACZ,OAAOH,OAAOC,OAAOE,EAASrF,EAAIoF,KAAKjD,cAExCwC,IAAa,SAAAW,GACZ,OAAOJ,OAAOC,OAAOG,EAAQtF,EAAIoF,KAAKhD,cAGnCpC,EAAIoF,KAAKG,SAEZf,GAAa,GAIbgB,YAAW,WACVZ,EAAW1C,EAAWuD,UACpBzD,EAAS,eAGb0D,OAAM,SAAAC,GACNnB,GAAa,GACboB,QAAQC,IAAIF,OAIVG,GAAa,kBAAC,EAAD,MAIjB,IAAKvB,EAAW,CACf,IAAIwB,GAAW,6BAAO1G,EAAEF,EAAS6G,WAC3BC,GAAWhE,EAAaC,EAAYC,GAAWC,IACjD6D,IAAYA,GAASR,SACxBM,GAAWE,GAAS5D,KAAI,SAAArC,GACvB,OAAO,kBAAC,EAAD,CAASkG,IAAKC,MAAUnG,IAAKA,QAGtC8F,GACC,yBAAKvG,UAAWC,IAAQ4G,YACtBL,IAKJ,OACC,yBAAKxG,UAAWC,IAAQM,SACvB,yBAAKP,UAAWC,IAAQ6G,MACvB,yBAAK9G,UAAWC,IAAQ8G,WACvB,yBAAK/G,UAAWC,IAAQ+G,UACZ,6BAAOlH,EAAEF,EAASqB,cAC7B,kBAAC,IAAD,CAAUgG,QAAS5E,EACfC,MAAOrB,EACPiG,SAAU,SAACC,GAAD,OAAQ7C,EAAiB,OAAC6C,QAAD,IAACA,OAAD,EAACA,EAAI7E,QACxC8E,YAActH,EAAEF,EAASyH,oBAE9B,yBAAKrH,UAAWC,IAAQ+G,UACZ,6BAAOlH,EAAEF,EAAS0B,UAC7B,kBAAC,IAAD,CAAU2F,QAAS5E,EACfC,MAAOhB,EACP4F,SAAU,SAACC,GAAD,OAAQ5C,EAAa,OAAC4C,QAAD,IAACA,OAAD,EAACA,EAAI7E,QACpC8E,YAActH,EAAEF,EAASyH,oBAE9B,yBAAKrH,UAAWC,IAAQ+G,UACZ,6BAAOlH,EAAEF,EAAS+E,aAC7B,kBAAC,IAAD,CAAY3E,UAAWC,IAAQqH,WAC5BC,aAAcC,IAAO7C,GACrBuC,SAAU,SAACC,GAASvC,EAAgB,OAACuC,QAAD,IAACA,OAAD,EAACA,EAAIzC,cAAcd,UAAU,EAAG,SAGxE,yBAAK5D,UAAWC,IAAQ+G,UACZ,6BAAOlH,EAAEF,EAAS6H,YAC7B,kBAAC,IAAD,CAAYzH,UAAWC,IAAQqH,cAEhC,yBAAKtH,UAAWC,IAAQ+G,UACZ,6BAAOlH,EAAEF,EAAS8H,YAC7B,kBAAC,IAAD,CAAUT,QAASzE,EACfF,MAAOE,EAAc,GAAGF,MACxBqF,UAAU,EACVP,YAActH,EAAEF,EAASgI,oBAG9B,kBAAC,IAAD,CAAQ5H,UAAWC,IAAQ4H,UACzBC,QAAU,kBAhHf5C,EAAc,IACdC,GAAa,IACbC,GAAa,IAGbH,GAAa,QAGbI,GAAW,IAyGN0C,KAAK,UACLC,KAAO,kBAACC,EAAA,EAAD,OAENnI,EAAEF,EAASsI,WAIf3B,K,iBChKW4B,EANE,CAEb,CAAE7F,MAAO,KAAMC,MAAO,WACtB,CAAED,MAAO,KAAMC,MAAO,gBCGX6F,EANM,CAEpB,CAAE9F,MAAO,MAAOC,MAAO,SACvB,CAAED,MAAO,MAAOC,MAAO,eCqCTjC,EA7BA,SAAC,GAAuC,IAArC8D,EAAoC,EAApCA,KAAMzC,EAA8B,EAA9BA,SAAU0G,EAAoB,EAApBA,cAW9B,OACI,yBAAKrI,UAAWC,IAAQK,QAC7B,kBAAC,IAAD,CAAUN,UAAWC,IAAQqI,WACzBhG,MAAOX,EACPsF,QAASmB,EACTlB,SAAU,SAACC,GAAD,OAdUoB,EAcepB,EAAG7E,WAb3C+F,EAAcjE,EAAMmE,GADI,IAACA,GAepBnB,YAAY,sBAEhB,kBAAC,IAAD,CAAUpH,UAAWC,IAAQqI,WACVhG,MAAO8B,EACtB6C,QAASkB,EACMjB,SAAU,SAACC,GAAD,OAfTqB,EAe8BrB,EAAG7E,WAdtD+F,EAAcG,EAAU7G,GADJ,IAAC6G,GAgBDpB,YAAY,wBCFnBqB,MAtBf,WACkB1I,cAAT2I,KADO,IAAD,EAEUrE,mBAAS8D,EAAS,GAAG7F,OAF/B,mBAEP8B,EAFO,KAEDuE,EAFC,OAGkBtE,mBAAS+D,EAAa,GAAG9F,OAH3C,mBAGPX,EAHO,KAGGiH,EAHH,KAKd,SAASP,EAAcG,EAAUD,GAChCI,EAAQH,GACRI,EAAYL,GAOb,OAJAM,qBAAU,WACTC,IAAQC,eAAe3E,KACrB,CAACA,IAGH,kBAAC,EAAD,CACChE,OAAQ,kBAAC,EAAD,CAAQgE,KAAMA,EAAMzC,SAAUA,EAAU0G,cAAeA,IAC/DhI,QAAS,kBAAC,EAAD,CAAS+D,KAAMA,EAAMzC,SAAUA,EAAU0G,cAAeA,O,wBCrB9DW,EAAY,CACjBC,GAAI,CACHC,Y,QAEDC,GAAI,CACHD,Y,SAIFR,IACEU,IAAIC,KACJC,KAAK,CACLN,YACAO,IAAK,KACLC,YAAa,KACbC,OAAO,EACPC,cAAc,EACdC,cAAe,CACdC,aAAa,EACbC,gBAAiB,KAElBC,MAAO,CACJC,MAAM,KAIIrB,EAAf,ECzBAsB,IAASC,OACR,kBAAC,IAAMC,WAAP,KACC,kBAAC,EAAD,OAEDC,SAASC,eAAe,U,mBCVzBC,EAAOC,QAAU,CAAC,QAAU,yBAAyB,KAAO,sBAAsB,UAAY,2BAA2B,UAAY,2BAA2B,SAAW,0BAA0B,WAAa,4BAA4B,WAAa,8B,mBCA3PD,EAAOC,QAAU,CAAC,QAAU,yBAAyB,KAAO,sBAAsB,IAAM,qBAAqB,MAAQ,uBAAuB,YAAc,+B,mBCA1JD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,OAAS,0BAA0B,QAAU,6B,mBCAxGD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,6B,mBCA/DD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,MAAQ,wB,mBCA1DD,EAAOC,QAAU,CAAC,QAAU,4B","file":"static/js/main.8381d0a8.chunk.js","sourcesContent":["const NameJson = { \r\n    'loading': 'Loading...',\r\n    'title': 'React Coding Challenge on Guru',\r\n\r\n    // search form\r\n\t'leavingFrom': 'Leaving From',\r\n\t'goingTo': 'Going To',\r\n\t'leavingDay': 'Leaving Day',\r\n\t'returnDay': 'Return Day',\r\n\t'passenger': 'Passenger',\r\n    'Search': 'Search',\r\n    'selectPassenger': 'Select a passenger',\r\n    'SelectDeparture': 'Select a departure',\r\n\r\n    // sections: polling result\r\n    'noResult': \"No result\",\r\n    'price': 'Price',\r\n}\r\n\r\nexport default NameJson","import React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport classes from './Header.module.sass'\r\nimport NameJson from '../../../shared/Common/Name'\r\n\r\n/**\r\n * Header\r\n */\r\nconst Header = () => {\r\n\tconst { t } = useTranslation()\r\n\r\n\treturn (\r\n\t\t<header className={classes.Header}>\r\n\t\t\t<div className={classes.title}>\r\n\t\t\t\t{ t(NameJson.title) }\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\n\r\nimport classes from './Container.module.sass'\r\nimport Header from '../Header/Header'\r\n\r\n/**\r\n * container, include header,\r\n * navbar and content\r\n * without sidebar and footer\r\n */\r\nconst Container = ({ navbar, content }) => {\r\n    return (\r\n        <div className={classes.Container}>\r\n            <Header />\r\n            <div className={classes.Navbar}>\r\n                {navbar}\r\n            </div>\r\n            <div className={classes.Content}>\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Container","import React from 'react'\r\nimport classes from './Section.module.sass'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport NameJson from '../../../shared/Common/Name'\r\n\r\n/**\r\n * Show a polling result into a section\r\n */\r\nconst Section = ({ res }) => {\r\n\tconst { t } = useTranslation()\r\n\r\n    return (\r\n        <div className={classes.Section}>\r\n            <div className={classes.Info}>\r\n                <a href={res.operatorUrl}>\r\n                    <img src={res.operatorLogoUrl} className={classes.Log} alt='Operator Logo' />\r\n                </a>\r\n                <div className={classes.title}>{ t(NameJson.leavingFrom) }:</div>\r\n                <div className={classes.description}>{res.departure}</div>\r\n                <div className={classes.description}>{res.departureAddress}</div>\r\n                <div className={classes.description}>{res.departureTime}</div>\r\n                <div className={classes.title}>{ t(NameJson.goingTo) }:</div>\r\n                <div className={classes.description}>{res.arrival}</div>\r\n                <div className={classes.description}>{res.arrivalAddress}</div>\r\n                <div className={classes.description}>{res.arrivalTime}</div>\r\n                <div className={classes.title}>{ t(NameJson.price) }: {res.price} {res.currency}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Section\r\n","import React from 'react'\r\nimport { Spin } from 'antd'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport classes from './Loading.module.sass'\r\nimport NameJson from '../../../shared/Common/Name'\r\n\r\n/**\r\n * Show on loading \r\n */\r\nconst Loading = () => {\r\n\tconst { t } =  useTranslation()\r\n\r\n\treturn (\r\n\t\t<div className={classes.Loading}>\r\n\t\t\t<div>{ t(NameJson.loading) }</div>\r\n\t\t\t<Spin size='large' />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Loading\r\n","import axios from 'axios'\n\n/**\n * axios instance for polling search\n */\nconst AxiosInstance = axios.create({\n\tbaseURL: 'https://napi.busbud.com/',\n\theaders: {\n\t\t'Content-Type': 'application/json',\n\t\tAccept: 'application/vnd.busbud+json; version=2; profile=https://schema.busbud.com/v2/',\n\t\t'X-Busbud-Token': 'PARTNER_BaASYYHxTxuOINEOMWq5GA'\n\t}\n})\n\nexport default AxiosInstance\n","const GeoCodeList = [\r\n\t{ value: 'dr5reg', label: 'New York' },\r\n\t{ value: 'f25dvk', label: 'Montreal' },\r\n\t{ value: 'dqcjqb', label: 'Washington' }\r\n]\r\n\r\nexport default GeoCodeList","const PassengerList = [\r\n\t{ value: 'adult', label: 'Adult' },\r\n\t{ value: 'child', label: 'Child' },\r\n\t{ value: 'senior', label: 'Senior' }\r\n]\r\n\r\nexport default PassengerList","const ConstJson = { \r\n\t'setTimeout': 3000,\r\n}\r\n\r\nexport default ConstJson","/**\r\n * Parse polling result\r\n * Return a list of parsed info,\r\n * such as departure time, arrival time,\r\n * location name and price\r\n */\r\nconst ParsePollRes = (departures, locations, operators) => {\r\n    try {\r\n        // find all info by departure\r\n        return departures.map(dep => {\r\n            const departure = locations.find(loc => loc.id === dep.origin_location_id)\r\n            const arrival = locations.find(loc => loc.id === dep.destination_location_id)\r\n            const operator = operators.find(op => op.id === dep.operator_id)\r\n\r\n            return {\r\n                'departure': departure.name,\r\n                'departureAddress': departure.address.join(','),\r\n                'departureTime': dep.departure_time.substring(11, 19),\r\n                'arrival': arrival.name,\r\n                'arrivalAddress': arrival.address.join(','),\r\n                'arrivalTime': dep.arrival_time.substring(11, 19),\r\n                'price': (dep.prices?.total / 100).toFixed(2),\r\n                'currency': dep.prices?.currency,\r\n                'operatorUrl': operator.url,\r\n                'operatorLogoUrl': operator.logo_url,\r\n            }\r\n        })\r\n    }\r\n    catch(e) {\r\n        return null;\r\n    }\r\n    \r\n}\r\n\r\nexport default ParsePollRes","import React, { useState } from 'react'\r\nimport Dropdown from 'react-dropdown'\r\nimport moment from 'moment'\r\nimport { Button, DatePicker } from 'antd'\r\nimport { SearchOutlined } from '@ant-design/icons'\r\nimport uuidv4 from 'uuid/v4'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport classes from './Content.module.sass'\r\nimport Section from '../Section/Section'\r\nimport Loading from '../Loading/Loading'\r\nimport AxiosInstance from '../../Axios/AxiosInstance'\r\nimport GeoCodeList from '../../../shared/GeoCode/GeoCode'\r\nimport NameJson from '../../../shared/Common/Name'\r\nimport PassengerList from '../../../shared/Passenger/Passenger'\r\nimport ConstJson from '../../../shared/Common/Const'\r\nimport ParsePollRes from '../../utils/ParsePollRes'\r\n\r\n/**\r\n * content\r\n * poll search\r\n * show result\r\n */\r\nconst Content = ({ lang, currency }) => {\r\n\tconst { t } = useTranslation()\r\n\r\n\tconst [leavingFrom, changeLeavingFrom] = useState(GeoCodeList[0].value)\r\n\tconst [goingTo, changeGoingTo] = useState(GeoCodeList[0].value)\r\n\tconst now = new Date()\r\n\tconst currentDate = now.toISOString().substring(0, 10)\r\n\tconst [leavingDay, changeLeavingDay] = useState(currentDate)\r\n\tconst [adult, changeAdult] = useState(1)\r\n\tconst [child, changeChild] = useState(0)\r\n\tconst [senior, changeSenior] = useState(0)\r\n\tconst [onLoading, setOnLoading] = useState(false)\r\n\tconst [departures, setDepartures] = useState([])\r\n\tconst [locations, setLocations] = useState([])\r\n\tconst [operators, setOperators] = useState([])\r\n\t\r\n\t/**\r\n\t * preprocess for poll search\r\n\t * initialize the past poll data\r\n\t */\r\n\tconst prePollSearch = () => {\r\n\t\t// initialize departures, \r\n\t\t// locations and operators\r\n\t\tsetDepartures([])\r\n\t\tsetLocations([])\r\n\t\tsetOperators([])\r\n\r\n\t\t// mark on loading\r\n\t\tsetOnLoading(true)\r\n\t\t\r\n\t\t// do poll search\r\n\t\tpollSearch(0)\r\n\t}\r\n\r\n\t/**\r\n\t * Poll search\r\n\t*/\r\n\tconst pollSearch = (index) => {\r\n\t\tAxiosInstance.get(`/x-departures/${leavingFrom}/${goingTo}/${leavingDay}/poll`, {\r\n\t\t\tparams: {\r\n\t\t\t\tadult,\r\n\t\t\t\tchild,\r\n\t\t\t\tsenior,\r\n\t\t\t\tlang,\r\n\t\t\t\tcurrency,\r\n\t\t\t\tindex\r\n\t\t\t}\r\n\t\t})\r\n\t\t.then(res => {\r\n\t\t\t// add polling result, such as\r\n\t\t\t// departures, locations and operators\r\n\t\t\tsetDepartures(prevDep => {\r\n\t\t\t\treturn Object.assign(prevDep, res.data.departures)\r\n\t\t\t})\r\n\t\t\tsetLocations(prevLoc => {\r\n\t\t\t\treturn Object.assign(prevLoc, res.data.locations)\r\n\t\t\t})\r\n\t\t\tsetOperators(prevOp => {\r\n\t\t\t\treturn Object.assign(prevOp, res.data.operators)\r\n\t\t\t})\r\n\r\n\t\t\tif (res.data.complete) {\r\n\t\t\t\t// finish poll search\r\n\t\t\t\tsetOnLoading(false)\r\n\t\t\t} \r\n\t\t\telse {\r\n\t\t\t\t// poll search again\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tpollSearch(departures.length)\r\n\t\t\t\t}, ConstJson['setTimeout'])\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tsetOnLoading(false)\r\n\t\t\tconsole.log(err)\r\n\t\t})\r\n\t}\r\n\r\n\tlet showResult = <Loading />\r\n\r\n\t// if poll searching is finished,\r\n\t// show poll result\r\n\tif (!onLoading) {\r\n\t\tlet sections = <div>{ t(NameJson.noResult) }</div>\r\n\t\tconst parseRes = ParsePollRes(departures, locations, operators)\r\n\t\tif (parseRes && parseRes.length) {\r\n\t\t\tsections = parseRes.map(res => {\r\n\t\t\t\treturn <Section key={uuidv4()} res={res} />\r\n\t\t\t})\r\n\t\t}\r\n\t\tshowResult = (\r\n\t\t\t<div className={classes.ShowResult}>\r\n\t\t\t\t{sections}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.Content}>\r\n\t\t\t<div className={classes.Form}>\r\n\t\t\t\t<div className={classes.FormGroup}>\r\n\t\t\t\t\t<div className={classes.FormItem}>\r\n              \t\t\t<div>{ t(NameJson.leavingFrom) }</div>\r\n\t\t\t\t\t\t<Dropdown options={GeoCodeList} \r\n\t\t\t\t\t\t\t\t  value={leavingFrom} \r\n\t\t\t\t\t\t\t\t  onChange={(ob) => changeLeavingFrom(ob?.value)} \r\n\t\t\t\t\t\t\t\t  placeholder={ t(NameJson.SelectDeparture) } />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={classes.FormItem}>\r\n              \t\t\t<div>{ t(NameJson.goingTo) }</div>\r\n\t\t\t\t\t\t<Dropdown options={GeoCodeList} \r\n\t\t\t\t\t\t\t\t  value={goingTo} \r\n\t\t\t\t\t\t\t\t  onChange={(ob) => changeGoingTo(ob?.value)} \r\n\t\t\t\t\t\t\t\t  placeholder={ t(NameJson.SelectDeparture) } />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={classes.FormItem}>\r\n              \t\t\t<div>{ t(NameJson.leavingDay) }</div>\r\n\t\t\t\t\t\t<DatePicker className={classes.DatePicker}\r\n\t\t\t\t\t\t\t\t\tdefaultValue={moment(leavingDay)} \r\n\t\t\t\t\t\t\t\t\tonChange={(ob) => { changeLeavingDay(ob?.toISOString().substring(0, 10)) }}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={classes.FormItem}>\r\n              \t\t\t<div>{ t(NameJson.returnDay) }</div>\r\n\t\t\t\t\t\t<DatePicker className={classes.DatePicker} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={classes.FormItem}>\r\n              \t\t\t<div>{ t(NameJson.passenger) }</div>\r\n\t\t\t\t\t\t<Dropdown options={PassengerList} \r\n\t\t\t\t\t\t\t\t  value={PassengerList[0].value}\r\n\t\t\t\t\t\t\t\t  disabled={true}\r\n\t\t\t\t\t\t\t\t  placeholder={ t(NameJson.selectPassenger) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Button className={classes.SearchBtn} \r\n\t\t\t\t\t\t\tonClick={ () => prePollSearch() } \r\n\t\t\t\t\t\t\ttype='primary' \r\n\t\t\t\t\t\t\ticon={ <SearchOutlined /> }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ t(NameJson.Search) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{showResult}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Content\r\n","const LangList = [\r\n\t// ISO 3166-1 alpha-2 language code\r\n    { value: 'en', label: 'English' },\r\n    { value: 'fr', label: 'Français' }\r\n]\r\n\r\nexport default LangList","const CurrencyList = [\r\n\t// ISO 4217 currency code\r\n\t{ value: 'USD', label: 'USD $' },\r\n\t{ value: 'EUR', label: 'EUR €' }\r\n]\r\n\r\nexport default CurrencyList","import React from 'react'\r\nimport Dropdown from 'react-dropdown'\r\n\r\nimport classes from './Navbar.module.sass'\r\nimport LangList from '../../../shared/Lang/Lang'\r\nimport CurrencyList from '../../../shared/Currency/Currency'\r\n\r\n/**\r\n * Navbar\r\n * Handle language and currency\r\n */\r\nconst Navbar = ({ lang, currency, nabvarChanged }) => {\r\n\t// currency is changed\r\n\tconst onCurrencyChange = (cur) => {\r\n\t\tnabvarChanged(lang, cur)\r\n\t}\r\n\r\n\t// language is changed\r\n\tconst onLangChange = (language) => {\r\n\t\tnabvarChanged(language, currency)\r\n\t}\r\n\r\n    return (\r\n        <div className={classes.Navbar}>\r\n\t\t\t<Dropdown className={classes.NavbarItem}\r\n\t\t\t\t\t  value={currency}\r\n\t\t\t\t\t  options={CurrencyList} \r\n\t\t\t\t\t  onChange={(ob) => onCurrencyChange(ob.value)} \r\n\t\t\t\t\t  placeholder='Select a Currency' \r\n\t\t\t/>\r\n\t\t\t<Dropdown className={classes.NavbarItem}\r\n                      value={lang}\r\n\t\t\t\t\t  options={LangList} \r\n                      onChange={(ob) => onLangChange(ob.value)} \r\n                      placeholder='Select a Language' \r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Navbar","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next'\nimport i18next from 'i18next';\n\nimport Container from './app/components/Container/Container'\nimport Content from './app/components/Content/Content'\nimport Navbar from './app/components/Navbar/Navbar'\nimport LangList from './shared/Lang/Lang'\nimport CurrencyList from './shared/Currency/Currency'\n\nfunction App() {\n\tconst { i18n } = useTranslation()\n\tconst [lang, setLang] = useState(LangList[0].value)\n\tconst [currency, setCurrency] = useState(CurrencyList[0].value)\n\n\tfunction nabvarChanged(language, cur) {\n\t\tsetLang(language)\n\t\tsetCurrency(cur)\n\t}\n\n\tuseEffect(() => {\n\t\ti18next.changeLanguage(lang)\n\t}, [lang])\n\t\n\treturn (\n\t\t<Container\n\t\t\tnavbar={<Navbar lang={lang} currency={currency} nabvarChanged={nabvarChanged} />}\n\t\t\tcontent={<Content lang={lang} currency={currency} nabvarChanged={nabvarChanged} />}\n\t\t/>\n\t);\n}\n\nexport default App;\n","import i18n from 'i18next'\nimport { initReactI18next } from 'react-i18next'\nimport translationEn from './en.json'\nimport translationFr from './fr.json'\n\n// set translation\nconst resources = {\n\ten: {\n\t\ttranslation: translationEn\n\t},\n\tfr: {\n\t\ttranslation: translationFr\n\t}\n}\n\ni18n\n\t.use(initReactI18next)\n\t.init({\n\t\tresources,\n\t\tlng: 'en',\n\t\tfallbackLng: 'fr',\n\t\tdebug: true,\n\t\tkeySeparator: false, \n\t\tinterpolation: {\n\t\t\tescapeValue: false,\n\t\t\tformatSeparator: ','\n\t\t},\n\t\treact: {\n\t\t  \twait: true\n\t\t}\n\t})\n\nexport default i18n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'antd/dist/antd.css'\nimport 'react-dropdown/style.css'\nimport './shared/Lang/i18n'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Content\":\"Content_Content__1SG4W\",\"Form\":\"Content_Form__1d26m\",\"SearchBtn\":\"Content_SearchBtn__3DKPS\",\"FormGroup\":\"Content_FormGroup__2i2r0\",\"FormItem\":\"Content_FormItem__15rAV\",\"DatePicker\":\"Content_DatePicker__frVqO\",\"ShowResult\":\"Content_ShowResult__2fREr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Section\":\"Section_Section__2yFUz\",\"Info\":\"Section_Info__3Vn3R\",\"Log\":\"Section_Log__1ay0k\",\"title\":\"Section_title__3s0zw\",\"description\":\"Section_description__3zU0i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__2fKfE\",\"Navbar\":\"Container_Navbar__Csz4k\",\"Content\":\"Container_Content___jREG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Navbar\":\"Navbar_Navbar__10H2h\",\"NavbarItem\":\"Navbar_NavbarItem__3v-ro\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__3gVls\",\"title\":\"Header_title__moGXK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loading\":\"Loading_Loading__3nE0J\"};"],"sourceRoot":""}